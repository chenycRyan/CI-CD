/*!
 *  build: HuiBo-Admin 
 *   time: 2022-12-1 15:17:30
 */
(window["webpackJsonp_huibo"]=window["webpackJsonp_huibo"]||[]).push([["chunk-f4160e3c"],{"828d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"data-container"},[e("div",[e("el-form",{attrs:{inline:!0,model:t.queryForm}},[e("el-form-item",{staticClass:"query-form-item"},[e("el-input",{attrs:{autocomplete:"off",clearable:"",placeholder:"请输入表名"},model:{value:t.queryForm.tableName,callback:function(e){t.$set(t.queryForm,"tableName",e)},expression:"queryForm.tableName"}})],1),e("el-form-item",[e("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.getList}},[t._v(" 搜索 ")])],1)],1)],1),e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableParams.loading,expression:"tableParams.loading"}],attrs:{border:"",data:t.tableData}},[e("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._l(t.tableColumn,(function(a){return[a.slot?e("el-table-column",{key:a.prop,attrs:{label:a.label,width:a.width||""},scopedSlots:t._u([{key:"default",fn:function(n){return["html"==a.slot?e("div",{attrs:{slot:"info"},domProps:{innerHTML:t._s(a.show(n.row))},slot:"info"}):e("div",[t._v(" "+t._s(a.show(n.row))+" ")])]}}],null,!0)}):e("el-table-column",{key:a.prop+"1",attrs:{label:a.label,prop:a.prop,width:a.width||""}})]})),e("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){return t.notSyncRow(a)}}},[t._v(" 撤销 ")])]}}])})],2),t.tableData.length?e("el-pagination",{attrs:{"current-page":t.currentPage,layout:"total, sizes, prev, pager, next, jumper","page-size":t.pageSize,total:t.tableParams.total},on:{"current-change":t.tableChange,"size-change":t.sizeChange}}):t._e()],1)])},o=[];const r=[{prop:"dataName",label:"数据集名称"},{prop:"schoolType",label:"院校类型",slot:!0,show:function(t){return"高职"}},{prop:"tableName",label:"具体表名"},{prop:"params",label:"同步参数",width:"400"},{prop:"mode",label:"同步方式"},{prop:"status",label:"状态",slot:"html",show:function(t){let e="";return e=0==t.status?'<span style="display: inline-block;color:#ffba00; border: 1px solid #faecd8; background-color: #fdf6ec; padding: 2px 10px;">待推送</span>':'<span style="display: inline-block;color:#42d885; border: 1px solid #e1f3d8; background-color: #f0f9eb; padding: 2px 10px;">已推送</span>',e}}];var l=a("bad7"),s=a("d936"),i={data(){return{activeName:"notSync",currentPage:1,queryForm:{tableName:null,xxjgdm:null},pageSize:10,tableData:[],tableColumn:r,tableParams:{loading:!1,total:0}}},async mounted(){const t=await Object(s["d"])();t?(this.queryForm.xxjgdm=t.xxjgdm,this.getList()):this.$message({type:"warning",message:"无相关学校，请先注册或选中相关学校！",duration:0,showClose:!0})},methods:{getList(){this.tableParams.loading=!0;const t={...this.queryForm,page:this.currentPage-1,size:this.pageSize,sort:"createdTime,DESC"};Object(l["b"])(t).then(t=>{t&&(this.tableData=t.content,this.tableParams.total=t.totalElements)}).finally(()=>{this.tableParams.loading=!1})},notSyncRow(t){console.log(t),this.$confirm("该操作将撤销该条数据推送, 是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["a"])(t.id).then(()=>{this.$message.success("已撤销该数据推送!"),this.getList()}).catch(()=>{this.$message.info("发生错误，已取消操作")})})},tableChange(t){this.currentPage=t,this.getList()},sizeChange(t){this.currentPage=1,this.pageSize=t,this.getList()}}},c=i,u=a("2877"),d=Object(u["a"])(c,n,o,!1,null,"081898a8",null);e["default"]=d.exports},bad7:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return l}));var n=a("b775");const o="/cms";function r(t){const e={};return Object.keys(t).forEach(a=>{null!==t[a]&&""!==t[a]&&(e[a]=t[a])}),Object(n["a"])({url:o+"/syn/page",method:"get",params:e})}function l(t){return Object(n["a"])({url:`${o}/syn/revoke/${t}`,method:"delete"})}},d936:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"h",(function(){return b})),a.d(e,"b",(function(){return m})),a.d(e,"i",(function(){return g})),a.d(e,"g",(function(){return p}));var n=a("b775"),o=a("4360"),r=a("cc33");const l="/cms";function s(){return Object(n["a"])({url:"/orion/districts/list",method:"GET"})}async function i(){const t=o["a"].getters["user/schoolId"];let e=Object(r["a"])();if(e)o["a"].commit("user/setSchoolId",e.id);else{if(t)try{const e=await d(t);Object(r["e"])(JSON.stringify(e))}catch(a){console.log(a)}e=Object(r["a"])()}return e?{odsXygkjcsjId:e.id,xxjgdm:e.xxjgdm,xxjgmc:e.xxjgmc}:null}function c(t){return Object(n["a"])({url:l+"/xygkjcsj",method:"post",data:t})}function u(t){const e={};return t&&Object.keys(t).forEach(a=>{null!==t[a]&&""!==t[a]&&(e[a]=t[a])}),Object(n["a"])({url:l+"/xygkjcsj/list",method:"get",params:e})}function d(t){return Object(n["a"])({url:`${l}/xygkjcsj/${t}`,method:"get"})}function b(t,e){return Object(n["a"])({url:`${l}/xygkjcsj/${t}`,method:"put",data:e})}function m(t){return Object(n["a"])({url:`${l}/xygkjcsj/${t}`,method:"delete"})}const g=t=>Object(n["a"])({url:`${l}/xygkjcsj/syn/${t}`,method:"get"}),p=t=>Object(n["a"])({url:`${l}/xygkjcsj/edit/${t}`,method:"get"})}}]);